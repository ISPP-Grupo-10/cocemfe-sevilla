{% extends 'base.html' %}
{% block title %}Detalles{% endblock %}
{% block encabezado %}
{% endblock %}
{% block contenido %}

<style>
    .map-container {
        flex: 80; 
        width: 100%; 
    }
    .list-container {
        flex: 20; 
        overflow-y: auto; 
        padding: 10px; 
        box-sizing: border-box;
    }

    .document-list {
        list-style: none; 
        padding: 0;
    }

    .document-item {
        margin-bottom: 10px;
    }
    .container-map {
        display: flex;
        flex-direction: row; 
        max-width: 100%; 
        overflow: hidden; 
    }
</style>
<div class="container-map">
    <div class="map-container">
        {{ mapa_html | safe }}
    </div>
    <div class="list-container">
        <div id="accordion">
            {% for city, documents in documents_by_city.items %}
            <div class="accordion-item">
                <h2 class="accordion-header" id="heading{{ forloop.counter }}">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ forloop.counter }}" aria-expanded="true" aria-controls="collapse{{ forloop.counter }}">
                        {{ city }}
                    </button>
                </h2>
                <div id="collapse{{ forloop.counter }}" class="accordion-collapse collapse show" aria-labelledby="heading{{ forloop.counter }}" data-bs-parent="#accordion">
                    <div class="accordion-body">
                        <ul class="document-list">
                            {% for document in documents %}
                            {% for coordinate in coordinates %}
                            {% if coordinate.location == document.ubication %}
                            <li class="document-item">
                                <a href="{% url 'maps:map_search' coordinate.latitude coordinate.longitude %}">
                                    {{ document.name }}
                                </a>
                            </li>
                            {% endif %}
                            {% endfor %}
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    
</div>

        <script src="https://unpkg.com/folium/folium.js"></script>
{% endblock %}